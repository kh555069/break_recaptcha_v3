<html>
    <head>
        <script src="https://www.google.com/recaptcha/api.js?render={{site_key}}"></script>
    </head>
    <body>
        <button onclick="onClick()">Submit</button>
        <script>
        function onClick() {
            grecaptcha.ready(function() {
                grecaptcha.execute('{{site_key}}', {action: 'submit'}).then(function(token) {
                    console.log(token);
                    document.getElementById('g-recaptcha-response').value = token;
                    document.form.submit();
                });
            });
        }
        </script>
        <form method='POST' name="form">
            <input type="hidden" id="g-recaptcha-response" name="g-recaptcha-response">
        </form>
    </body>
</html>
